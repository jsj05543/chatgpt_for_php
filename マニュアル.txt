=======================================
ChatGPT API <-> PHP
作成者: kotonoha*
作成日: 2023/03/13
=======================================

【動作環境】
PHP7（cURL必須）
Webブラウザ（Google Chrome動作確認済み）

【ディレクトリ構成】
index.php
css/
	├ style.css
data/
	├ data.txt
img/
	├ loading.png
js/
	├ chatapi.js
php/
	├ chatapi.php
	├ get-history.php
	├ reset.php
	├ save.php

【インストール方法】
1. php/chatapi.phpの6行目API_KEYを、取得したAPIキーに書き換える
	修正前: define(API_KEY, 'sk-');
	修正後: define(API_KEY, 'sk-*************************');

2. すべてのファイルをアップロード

3. アップロードしたユーザとPHPの実行権限が異なる場合、data/data.txtに書き込み権限を与える

4. https://（アップロードした場所）/index.phpにアクセス


【FAQ】

Q. 質問を送信しても、回答が表示されない
A. data/tata.txtに書き込み権限が与えられていない可能性があります。
　 FTPのアカウントとPHPの実行アカウントが異なる事が多いので、
　 不明な場合は data/data.txtのパーミッションを 0666に 設定しておくと良いでしょう。

Q. 他の人の質問も見えてしまうのですが…。
A. このチャットボットは一人用です。
　 data.txtに質問と回答がすべて入る様になっています。

Q. 前の会話を維持できますか？
A. はい。「会話をリセット」するまでの会話はAPIに送信されますので、
　 任意の話題での会話や、しりとりなどのゲームを楽しむことが出来ます。

Q. このPHPを使うとAPIの利用料金が物凄いのですが…。
A. ChatGPT APIでは、文字数に応じて料金が高くなる仕様です。
　 適度に「会話をリセット」を実行しないと、表示されている内容をすべて送信するので、
　 料金はご注意ください。（APIの料金ページなどを随時確認のうえ、上限設定などをご利用ください）

Q. APIにキャラクターを設定して、ロールプレイを楽しみたい
A. php/chatapi.phpの39行目の contentの中身を書き換えてください。
　     
　 修正前　$data["messages"][] = array('role' => 'system', 'content' => "");
　 修正後　$data["messages"][] = array('role' => 'system', 'content' => "関西弁で喋りなさい");

Q. ソースコードの書き方がなってない！
A. どこで何を処理しているのかを分かりやすくするために、あえてこうしています。
　 詳しい方は適宜書き換えていただければ幸いです。